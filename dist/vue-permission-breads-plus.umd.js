(function(e,s){typeof exports=="object"&&typeof module<"u"?module.exports=s(require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","vue-router"],s):(e=typeof globalThis<"u"?globalThis:e||self,e.vuePermissionBreadsPlus=s(e.Vue,e.vueRouter))})(this,function(e,s){"use strict";const O="",N={class:"vue-permission-breads-plus"},S={class:"left"},w=["onClick"],V={key:0},b=[{__name:"index",props:{menu:{type:Array,default:()=>[]},i18n:{type:Boolean,default:!1},positionTitle:{type:String,default:"\u6211\u7684\u4F4D\u7F6E"},backTitle:{type:String,default:"\u8FD4\u56DE"},backIconPosition:{type:String,default:"left"},backBtnClass:{type:String,default:"el/ArrowLeft"}},setup(l){const f=l,B=s.useRouter(),m=s.useRoute(),u=e.ref(!1),i=e.ref([]);let k=e.ref([]);e.watch(()=>f.menu,()=>{E()});const d=(o,n)=>new Promise(c=>{o.forEach(t=>{t.name===n?c(t):t.children.length>0&&d(t.children,n).then(r=>{c(r)})})}),y=(o,n)=>{let c=[];n&&(c=[...n.nameList],c.push(n)),o.forEach(t=>{t.nameList=c,t.children&&t.children.length>0?y(t.children,JSON.parse(JSON.stringify(t))):t.children=[]})},g=o=>(o=JSON.parse(JSON.stringify(o)),o.forEach(n=>{if(n.replaceIndex!==!0)if(n.parents){let c=n.parents.split("/");c.forEach((t,r)=>{d(JSON.parse(JSON.stringify(k.value)),t).then(h=>{h.replaceIndex!==!0&&n.nameList.push(h),r+1===c.length&&n.nameList.push(n)})})}else n.nameList.push(n);n.children.length>0&&(n.children=[...g(n.children)])}),o);e.watch(m,()=>{C()});const C=()=>{d(k.value,m.name).then(o=>{i.value=o.nameList,u.value=i.value[i.value.length-1].showBackBtn||!1})},E=()=>{k.value=JSON.parse(JSON.stringify(f.menu)),y(k.value),k.value=[...g(k.value)],C()};E();const T=()=>{B.back()},D=o=>{B.push({name:o.name})},a=e.ref(f.backBtnClass.split("/"));return(o,n)=>{const c=e.resolveComponent("el-icon");return e.openBlock(),e.createElementBlock("div",N,[e.createElementVNode("div",S,[e.createTextVNode(e.toDisplayString(l.i18n?o.$t(l.positionTitle):l.positionTitle)+"\uFF1A ",1),e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(t,r)=>(e.openBlock(),e.createElementBlock("li",{key:r,onClick:h=>r===i.value.length-1||D(t)},[e.createTextVNode(e.toDisplayString(l.i18n?o.$t(t.title):t.title)+" ",1),r!==i.value.length-1?(e.openBlock(),e.createElementBlock("span",V,">")):e.createCommentVNode("",!0)],8,w))),128))])]),u.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"back",onClick:T},[l.backIconPosition==="left"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[a.value[0]==="el"?(e.openBlock(),e.createBlock(c,{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(a.value[1])))]),_:1})):a.value[0]==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass(["icon iconfont","icon-"+a.value[1]])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(a.value[0])},e.toDisplayString(a.value[1]),3))],64)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(l.i18n?o.$t(l.backTitle):l.backTitle)+" ",1),l.backIconPosition==="right"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[a.value[0]==="el"?(e.openBlock(),e.createBlock(c,{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(a.value[1])))]),_:1})):a.value[0]==="iconfont"?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass(["icon iconfont","icon-"+a.value[1]])},null,2)):(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(a.value[0])},e.toDisplayString(a.value[1]),3))],64)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])}}}],p={install(l){b.forEach(f=>{l.component("vuePermissionBreadsPlus",f)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(p),p});
