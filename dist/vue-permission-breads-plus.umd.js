(function(e,l){typeof exports=="object"&&typeof module<"u"?module.exports=l(require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","vue-router"],l):(e=typeof globalThis<"u"?globalThis:e||self,e.vuePermissionBreadsPlus=l(e.Vue,e.vueRouter))})(this,function(e,l){"use strict";const x="",w={class:"left"},D=["onClick"],V=[{__name:"index",props:{menu:{type:Array,default:()=>[]},hideMenuIcon:{type:Boolean,default:!1},spaceIcon:{type:Object,default:()=>({icon:"\uFF1C"})},i18n:{type:Boolean,default:!1},simpleMode:{type:Boolean,default:!1},positionTitle:{type:String,default:"\u6211\u7684\u4F4D\u7F6E"},backTitle:{type:String,default:"\u8FD4\u56DE"},backIconPosition:{type:String,default:"left"},backBtn:{type:Object,default:()=>({})}},setup(n){const s=n,y=l.useRouter(),g=l.useRoute(),h=e.ref(!1),i=e.ref([]);let m=[],k=[];const p=t=>{let c=t instanceof Array?[]:{};for(let a in t)c[a]=typeof t[a]=="object"?p(t[a]):t[a];return c},B=t=>({name:t.name,title:t.title,icon:t.icon,replaceIndex:t.replaceIndex||!1,showBackBtn:t.showBackBtn||!1});e.watch(()=>s.menu,()=>{b()});const C=t=>m.filter(c=>c.name===t)[0],I=(t,c)=>{t.forEach(a=>{let o=[];c&&(o=[...c.nameList],o.push(B(c))),a.nameList=o,a.children&&a.children.length>0?I(a.children,a):a.children=[],m.push(a)})},E=t=>{t.forEach(c=>{if(c.replaceIndex!==!0)if(c.parents){let a=c.parents.split("/");a.forEach((o,r)=>{const d=C(o);d.replaceIndex!==!0&&c.nameList.push(B(d)),r+1===a.length&&c.nameList.push(B(c))})}else c.nameList.push(B(c));c.children.length>0&&E(c.children)})};e.watch(g,()=>{P()});const P=()=>{const t=C(g.name);i.value=[...t.nameList],h.value=i.value[i.value.length-1].showBackBtn||!1},b=()=>{k=p(s.menu),m=[],k.length>0&&(I(k),E(k),P())};b();const T=()=>{y.back()},N=t=>{y.push({name:t.name})};return(t,c)=>{const a=e.resolveComponent("el-icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vue-permission-breads-plus",n.simpleMode?"simple":""])},[e.createElementVNode("div",w,[n.simpleMode?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(n.i18n?t.$t(n.positionTitle):n.positionTitle)+"\uFF1A ",1)],64)),e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i),(o,r)=>(e.openBlock(),e.createElementBlock("li",{key:r,onClick:d=>r===e.unref(i).length-1||N(o)},[!n.hideMenuIcon&&o.icon&&(o.icon.icon||o.icon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[o.icon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.icon.icon),e.mergeProps({key:0,class:"menu-icon"},o.icon.attrs),null,16)):o.icon.type==="el"?(e.openBlock(),e.createBlock(a,e.mergeProps({key:1,class:"menu-icon"},o.icon.attrs),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.icon.icon)))]),_:2},1040)):o.icon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["menu-icon icon iconfont","icon-"+o.icon.icon]},o.icon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:["menu-icon",o.icon.type]},o.icon.attrs),e.toDisplayString(o.icon.icon),17))],64)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n.i18n?t.$t(o.title):o.title)+" ",1),r!==e.unref(i).length-1&&(n.spaceIcon.icon||n.spaceIcon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[n.spaceIcon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.spaceIcon.icon),e.mergeProps({key:0,class:"space-icon"},n.spaceIcon.attrs),null,16)):n.spaceIcon.type==="el"?(e.openBlock(),e.createBlock(a,e.mergeProps({key:1,class:"space-icon"},n.spaceIcon.attrs),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.spaceIcon.icon)))]),_:1},16)):n.spaceIcon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["space-icon icon iconfont","icon-"+n.spaceIcon.icon]},n.spaceIcon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:["space-icon",n.spaceIcon.type]},n.spaceIcon.attrs),e.toDisplayString(n.spaceIcon.icon),17))],64)):e.createCommentVNode("",!0)],8,D))),128))])]),!n.simpleMode&&e.unref(h)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["back",n.backIconPosition==="right"?"icon-right":"icon-left"]),onClick:T},[n.backIconPosition==="right"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(n.i18n?t.$t(n.backTitle):n.backTitle),1)],64)):e.createCommentVNode("",!0),n.backBtn.icon||n.backBtn.type?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[n.backBtn.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.backBtn.icon),e.normalizeProps(e.mergeProps({key:0},n.backBtn.attrs)),null,16)):n.backBtn.type==="el"?(e.openBlock(),e.createBlock(a,e.normalizeProps(e.mergeProps({key:1},n.backBtn.attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.backBtn.icon)))]),_:1},16)):n.backBtn.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+n.backBtn.icon]},n.backBtn.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:n.backBtn.type},n.backBtn.attrs),e.toDisplayString(n.backBtn.icon),17))],64)):e.createCommentVNode("",!0),n.backIconPosition==="left"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createTextVNode(e.toDisplayString(n.i18n?t.$t(n.backTitle):n.backTitle),1)],64)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)],2)}}}],f={install(n){V.forEach(s=>{n.component("vuePermissionBreadsPlus",s)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(f),f});
