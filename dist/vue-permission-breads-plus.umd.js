(function(e,l){typeof exports=="object"&&typeof module<"u"?module.exports=l(require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","vue-router"],l):(e=typeof globalThis<"u"?globalThis:e||self,e.vuePermissionBreadsPlus=l(e.Vue,e.vueRouter))})(this,function(e,l){"use strict";const x="",w={class:"left"},D=["onClick"],V=[{__name:"index",props:{menu:{type:Array,default:()=>[]},spaceIcon:{type:Object,default:()=>({icon:"\uFF1C"})},i18n:{type:Boolean,default:!1},simpleMode:{type:Boolean,default:!1},positionTitle:{type:String,default:"\u6211\u7684\u4F4D\u7F6E"},backTitle:{type:String,default:"\u8FD4\u56DE"},backIconPosition:{type:String,default:"left"},backBtn:{type:Object,default:()=>({})}},setup(n){const s=n,f=l.useRouter(),g=l.useRoute(),p=e.ref(!1),i=e.ref([]);let B=[],m=[];const h=(o,c=1)=>{let a=o instanceof Array?[]:{};for(let t in o)a[t]=typeof o[t]=="object"?h(o[t],c+1):o[t];return a},k=o=>({name:o.name,title:o.title,icon:o.icon,replaceIndex:o.replaceIndex||!1,showBackBtn:o.showBackBtn||!1});e.watch(()=>s.menu,()=>{b()});const C=o=>B.filter(c=>c.name===o)[0],I=(o,c)=>{o.forEach(a=>{let t=[];c&&(t=[...c.nameList],t.push(k(c))),a.nameList=t,a.children&&a.children.length>0?I(a.children,a):a.children=[],B.push(a)})},E=o=>{o.forEach(c=>{if(c.replaceIndex!==!0)if(c.parents){let a=c.parents.split("/");a.forEach((t,r)=>{const d=C(t);d.replaceIndex!==!0&&c.nameList.push(k(d)),r+1===a.length&&c.nameList.push(k(c))})}else c.nameList.push(k(c));c.children.length>0&&E(c.children)})};e.watch(g,()=>{P()});const P=()=>{const o=C(g.name);i.value=[...o.nameList],p.value=i.value[i.value.length-1].showBackBtn||!1},b=()=>{m=h(s.menu),B=[],I(m),E(m),P()};b();const T=()=>{f.back()},N=o=>{f.push({name:o.name})};return(o,c)=>{const a=e.resolveComponent("el-icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vue-permission-breads-plus",n.simpleMode?"simple":""])},[e.createElementVNode("div",w,[n.simpleMode?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(n.i18n?o.$t(n.positionTitle):n.positionTitle)+"\uFF1A ",1)],64)),e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(t,r)=>(e.openBlock(),e.createElementBlock("li",{key:r,onClick:d=>r===i.value.length-1||N(t)},[t.icon&&(t.icon.icon||t.icon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[t.icon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.icon.icon),e.mergeProps({key:0,class:"menu-icon"},t.icon.attrs),null,16)):t.icon.type==="el"?(e.openBlock(),e.createBlock(a,e.mergeProps({key:1,class:"menu-icon"},t.icon.attrs),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.icon.icon)))]),_:2},1040)):t.icon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["menu-icon icon iconfont","icon-"+t.icon.icon]},t.icon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:["menu-icon",t.icon.type]},t.icon.attrs),e.toDisplayString(t.icon.icon),17))],64)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n.i18n?o.$t(t.title):t.title)+" ",1),r!==i.value.length-1&&(n.spaceIcon.icon||n.spaceIcon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[n.spaceIcon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.spaceIcon.icon),e.mergeProps({key:0,class:"space-icon"},n.spaceIcon.attrs),null,16)):n.spaceIcon.type==="el"?(e.openBlock(),e.createBlock(a,e.mergeProps({key:1,class:"space-icon"},n.spaceIcon.attrs),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.spaceIcon.icon)))]),_:1},16)):n.spaceIcon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["space-icon icon iconfont","icon-"+n.spaceIcon.icon]},n.spaceIcon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:["space-icon",n.spaceIcon.type]},n.spaceIcon.attrs),e.toDisplayString(n.spaceIcon.icon),17))],64)):e.createCommentVNode("",!0)],8,D))),128))])]),!n.simpleMode&&p.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["back",n.backIconPosition==="right"?"icon-right":"icon-left"]),onClick:T},[n.backIconPosition==="right"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(n.i18n?o.$t(n.backTitle):n.backTitle),1)],64)):e.createCommentVNode("",!0),n.backBtn.icon||n.backBtn.type?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[n.backBtn.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.backBtn.icon),e.normalizeProps(e.mergeProps({key:0},n.backBtn.attrs)),null,16)):n.backBtn.type==="el"?(e.openBlock(),e.createBlock(a,e.normalizeProps(e.mergeProps({key:1},n.backBtn.attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.backBtn.icon)))]),_:1},16)):n.backBtn.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+n.backBtn.icon]},n.backBtn.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:n.backBtn.type},n.backBtn.attrs),e.toDisplayString(n.backBtn.icon),17))],64)):e.createCommentVNode("",!0),n.backIconPosition==="left"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createTextVNode(e.toDisplayString(n.i18n?o.$t(n.backTitle):n.backTitle),1)],64)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)],2)}}}],y={install(n){V.forEach(s=>{n.component("vuePermissionBreadsPlus",s)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(y),y});
