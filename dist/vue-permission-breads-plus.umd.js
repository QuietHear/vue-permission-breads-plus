(function(e,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","vue-router"],r):(e=typeof globalThis<"u"?globalThis:e||self,e.vuePermissionBreadsPlus=r(e.Vue,e.vueRouter))})(this,function(e,r){"use strict";const f={__name:"icon",props:{iconObj:{type:Object,requured:!0}},setup(n){return(s,m)=>{const i=e.resolveComponent("el-icon");return n.iconObj.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.iconObj.icon),e.normalizeProps(e.mergeProps({key:0},n.iconObj.attrs)),null,16)):n.iconObj.type==="el"?(e.openBlock(),e.createBlock(i,e.normalizeProps(e.mergeProps({key:1},n.iconObj.attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.iconObj.icon)))]),_:1},16)):n.iconObj.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+n.iconObj.icon]},n.iconObj.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:n.iconObj.type},n.iconObj.attrs),e.toDisplayString(n.iconObj.icon),17))}}},P="",T={class:"left"},j=["onClick"],V=[{__name:"index",props:{menu:{type:Array,default:()=>[]},hideMenuIcon:{type:Boolean,default:!1},spaceIcon:{type:Object,default:()=>({icon:"＜"})},i18n:{type:Boolean,default:!1},simpleMode:{type:Boolean,default:!1},positionTitle:{type:String,default:"我的位置"},backTitle:{type:String,default:"返回"},backIconPosition:{type:String,default:"left",validator(n,s){return["left","right"].includes(n)}},backBtn:{type:Object,default:()=>({})}},setup(n){const s=n,m=r.useRouter(),i=r.useRoute(),u=e.ref(!1),l=e.ref([]);let y=[],d=[];const B=t=>{let o=t instanceof Array?[]:{};for(let c in t)o[c]=typeof t[c]=="object"?B(t[c]):t[c];return o},k=t=>({name:t.name,title:t.title,icon:t.icon,replaceIndex:t.replaceIndex||!1,showBackBtn:t.showBackBtn||!1});e.watch(()=>s.menu,()=>{C()});const g=t=>y.filter(o=>o.name===t)[0],p=(t,o)=>{t.forEach(c=>{let a=[];o&&(a=[...o.nameList],a.push(k(o))),c.nameList=a,c.children&&c.children.length>0?p(c.children,c):c.children=[],y.push(c)})},b=t=>{t.forEach(o=>{o.parents&&(o.nameList=[],o.parents.split("/").forEach(a=>{const w=g(a);o.nameList.push(k(w))})),o.replaceIndex!==!0&&o.nameList.push(k(o)),o.children.length>0&&b(o.children)})};e.watch(i,()=>{d.length>0&&O()});const O=()=>{l.value=[],u.value=!1;const t=g(i.name);t&&(l.value=B(t.nameList),l.value[l.value.length-1].supLabel=i.query.breadsSupTit||"",i.query.diyTitle&&(l.value[l.value.length-1].title=i.query.diyTitle),u.value=l.value[l.value.length-1].showBackBtn||!1)},C=()=>{d=B(s.menu),y=[],d.length>0&&(p(d),b(d),O())};C();const E=()=>{m.back()},I=t=>{m.push({name:t.name})};return(t,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vue-permission-breads-plus",n.simpleMode?"simple":""])},[e.createElementVNode("div",T,[n.simpleMode?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(n.i18n?t.$t(n.positionTitle):n.positionTitle)+"： ",1)],64)),e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l),(c,a)=>(e.openBlock(),e.createElementBlock("li",{key:a,onClick:w=>a===e.unref(l).length-1||I(c)},[!n.hideMenuIcon&&c.icon&&(c.icon.icon||c.icon.type)?(e.openBlock(),e.createBlock(f,{key:0,class:"menu-icon",iconObj:c.icon},null,8,["iconObj"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(n.i18n?t.$t(c.title):c.title)+e.toDisplayString(c.supLabel)+" ",1),a!==e.unref(l).length-1&&(n.spaceIcon.icon||n.spaceIcon.type)?(e.openBlock(),e.createBlock(f,{key:1,class:"space-icon",iconObj:n.spaceIcon},null,8,["iconObj"])):e.createCommentVNode("",!0)],8,j))),128))])]),!n.simpleMode&&e.unref(u)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["back",n.backIconPosition==="right"?"icon-right":"icon-left"]),onClick:E},[n.backIconPosition==="right"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(n.i18n?t.$t(n.backTitle):n.backTitle),1)],64)):e.createCommentVNode("",!0),n.backBtn.icon||n.backBtn.type?(e.openBlock(),e.createBlock(f,{key:1,iconObj:n.backBtn},null,8,["iconObj"])):e.createCommentVNode("",!0),n.backIconPosition==="left"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createTextVNode(e.toDisplayString(n.i18n?t.$t(n.backTitle):n.backTitle),1)],64)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)],2))}}],h={install(n){V.forEach(s=>{n.component("vuePermissionBreadsPlus",s)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(h),h});
